<div class="container my-5">
  <div class="row mb-4">
    <div class="col-md-12">
      <form class="d-flex align-items-center" action="<%= reviews_path %>" method="get">
        <label for="rating" class="me-2">Filtros:</label>
        <select name="rating" id="rating" class="form-select me-2 w-auto">
          <option value="" selected>Todos</option>
          <option value="1">★☆☆☆☆</option>
          <option value="2">★★☆☆☆</option>
          <option value="3">★★★☆☆</option>
          <option value="4">★★★★☆</option>
          <option value="5">★★★★★</option>
        </select>
        <button type="submit" class="btn btn-primary">Aplicar Filtro</button>
      </form>
    </div>
  </div>

  <div class="row">
    <% filtered_reviews = params[:rating].present? ? @reviews.select { |review| review.rate == params[:rating].to_i } : @reviews.shuffle %>
    <% filtered_reviews.each do |review| %>
      <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm rounded">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title mb-2"><%= link_to review.user.name, profile_user_path(review.user) %></h5>
            <h6 class="card-subtitle mb-2 text-muted"><%= review.title %></h6>
            <p class="card-text mt-auto mb-2">Nota: <%= star_rating(review.rate) %></p>
            <div class="mt-auto d-flex justify-content-end">
              <%= link_to reviews_info_path(review), class: "text-secondary" do %>
                <i class="fas fa-info"></i>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
